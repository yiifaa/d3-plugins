{"version":3,"sources":["webpack:///webpack/bootstrap da894310038fd2ec3e2d","webpack:///external \"d3\"","webpack:///./src/graph.es6"],"names":["datas","id","username","strong","link_data","source","target","width","height","cx","cy","bodyForce","strength","linkForce","distance","data","sim","nodes","svg","force","links","append","attr","selectAll","enter","tickAction","d","x","y","on","console","log","alpha","alphaTarget","start_x","start_y","drag_start","active","restart","fx","fy","drag_drag","drag_end","drag_handler","zoom","zoom_handler","scaleExtent","zoom_actions","index","otherEl","transform","scale","k","tx","ty","d3","setTimeout","push","select"],"mappings":"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","file":"graph.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap da894310038fd2ec3e2d","module.exports = d3;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"d3\"\n// module id = 0\n// module chunks = 0","import * as d3 from 'd3'\r\n\r\n\r\nlet datas = [{\r\n    id : 1, \r\n    username : '蔡英文',\r\n    strong: 15\r\n}, {\r\n    \r\n    id : 2, \r\n    username : '陈水扁',\r\n    strong: 10\r\n}, {\r\n    id : 3, \r\n    username : '李登辉',\r\n    strong: 10\r\n}, {\r\n    id : 4, \r\n    username : '柯文哲',\r\n    strong: 8\r\n}, {\r\n    id : 5, \r\n    username : '何智辉',\r\n    strong: 8\r\n}, {\r\n    id : 6, \r\n    username : '郝柏村',\r\n    strong: 8\r\n}, {\r\n    id : 7, \r\n    username : '郁慕明',\r\n    strong: 8\r\n}, {\r\n    id : 8, \r\n    username : '马英九',\r\n    strong: 5\r\n}, {\r\n    id : 9, \r\n    username : '宋楚瑜',\r\n    strong: 5\r\n}, {\r\n    id : 10, \r\n    username : '吕秀莲',\r\n    strong: 5\r\n}]\r\n\r\nlet link_data = [{\r\n    source : 1,\r\n    target : 3\r\n}, {\r\n    source : 1,\r\n    target : 2\r\n}, {\r\n    source : 1,\r\n    target : 4\r\n}, {\r\n    source : 2,\r\n    target : 5\r\n}, {\r\n    source : 2,\r\n    target : 6\r\n}, {\r\n    source : 2,\r\n    target : 7\r\n}, {\r\n    source : 3,\r\n    target : 8\r\n}, {\r\n    source : 3,\r\n    target : 9\r\n}, {\r\n    source : 3,\r\n    target : 10\r\n}]\r\n\r\nlet width = 960,\r\n    height = 640,\r\n    cx = width / 2,\r\n    cy = height / 2,\r\n    bodyForce = d3.forceManyBody().strength(-60),\r\n    linkForce = d3.forceLink(link_data)\r\n                  .distance(200)\r\n                  .id(data => data.id),\r\n    sim = d3.forceSimulation()\r\n            .nodes(datas),\r\n            \r\n    svg = d3.select('#canvas')\r\n\r\nsim.force('body_force', bodyForce) \r\n    \r\n   .force(\"center_force\", d3.forceCenter(cx, cy))\r\n.force('links', linkForce)\r\n            //.force('links', linkForce)\r\n\r\nlet links = svg.append('g')\r\n               .attr('class', 'links')\r\n               .selectAll('line')\r\n               .data(link_data)\r\n               .enter()\r\n               .append('line')\r\n               .attr('stroke-width', 2)\r\n               .attr('stroke', 'green')\r\n            \r\nlet nodes = svg.append(\"g\")\r\n               .attr(\"class\", \"nodes\")\r\n               .selectAll(\"circle\")\r\n               .data(datas)\r\n               .enter()\r\n               .append(\"circle\")\r\n               .attr(\"r\", data => data.strong * 2)\r\n               .attr(\"fill\", \"red\")\r\n\r\n\r\n\r\nlet tickAction = function() {\r\n    //  console.log(nodes.size())\r\n    nodes\r\n        .attr(\"cx\", function(d) {\r\n            return d.x; \r\n        })\r\n        .attr(\"cy\", function(d) { return d.y; })\r\n    \r\n    links.attr('x1', d => d.source.x)\r\n         .attr('y1', d => d.source.y)\r\n         .attr('x2', d => d.target.x)\r\n         .attr('y2', d => d.target.y)\r\n    /**\r\n    links.attr('x1', d => {\r\n        if(d.source.scale !== undefined) {\r\n            let scale = d.source.scale || 1,\r\n                tx = d.source.tx || 0,\r\n                ty = d.source.ty || 0,\r\n                x = d.source.x,\r\n                rx = x * scale + tx \r\n            return rx\r\n        }\r\n        return d.source.x\r\n    })\r\n    .attr('y1', d => {\r\n        if(d.source.scale !== undefined) {\r\n            let scale = d.source.scale || 1,\r\n                    tx = d.source.tx || 0,\r\n                    ty = d.source.ty || 0,\r\n                    x = d.source.x,\r\n                    y = d.source.y,\r\n                    ry = y * scale + ty \r\n                return ry\r\n        }\r\n        return d.source.y\r\n    })\r\n         .attr('x2', d => {\r\n        if(d.target.scale !== undefined) {\r\n            let scale = d.target.scale || 1,\r\n                    tx = d.target.tx || 0,\r\n                    ty = d.target.ty || 0,\r\n                    x = d.target.x,\r\n                    y = d.target.y,\r\n                    rx = x * scale + tx\r\n                return rx\r\n        }\r\n        return d.target.x\r\n    })\r\n         .attr('y2', d => {\r\n        if(d.target.scale !== undefined) {\r\n            let scale = d.target.scale || 1,\r\n                    tx = d.target.tx || 0,\r\n                    ty = d.target.ty || 0,\r\n                    x = d.target.x,\r\n                    y = d.target.y,\r\n                    ry = y * scale + ty \r\n                return ry\r\n        }\r\n        return d.target.y\r\n    })\r\n    **/\r\n}\r\n\r\n\r\n\r\nsim.on('tick.nodes', tickAction)\r\nsim.on('end.nodes', () => {\r\n    //  console.log(arguments)\r\n    console.log(sim.alpha(), sim.alphaTarget())\r\n})\r\n\r\nlet start_x, start_y \r\nfunction drag_start(d) {\r\n  if (!d3.event.active) sim.alphaTarget(0.3).restart();\r\n\r\n  d.fx = d.x;\r\n  d.fy = d.y;\r\n}\r\n \r\nfunction drag_drag(d) {\r\n  d.fx = d3.event.x;\r\n  d.fy = d3.event.y;\r\n\r\n  /**\r\n  d.fx = d.fx + (d3.event.x - d.fx) / scale\r\n  d.fy = d.fy + (d3.event.y - d.fy) / scale\r\n  **/\r\n  /**\r\n  .attr(\"cx\", d.x = start_x + ((d3.event.x - start_x) / current_scale) )\r\n        .attr(\"cy\", d.y = start_y + ((d3.event.y - start_y) / current_scale));\r\n  d.fx = d3.event.x;\r\n  d.fy = d3.event.y;\r\n  **/\r\n}\r\n \r\nfunction drag_end(data) {\r\n  if (!d3.event.active) sim.alphaTarget(0);\r\n  data.fx = null;\r\n  data.fy = null;\r\n    /**\r\n    if(data.transform) {\r\n        d3.select(this).attr('transform', data.transform)\r\n    }\r\n    **/\r\n    /**\r\n    let s = data.scale || 1,\r\n        x = data.tx || 0,\r\n        y = data.ty || 0\r\n     \r\n    zoom.scaleTo(d3.select(this), s)\r\n    zoom.translateBy(d3.select(this), x, y)\r\n    **/\r\n   \r\n}\r\nvar drag_handler = d3.drag()\r\n    .on(\"start\", drag_start)\r\n    .on(\"drag\", drag_drag)\r\n    .on(\"end\", drag_end);\r\ndrag_handler(nodes)\r\n\r\n/****/\r\nvar zoom = d3.zoom()\r\nvar zoom_handler = zoom.scaleExtent([0.5, 2])\r\n    .on(\"zoom\", zoom_actions);\r\n\r\nfunction zoom_actions(data, index, otherEl){\r\n    //  指向当前结点\r\n    var transform = d3.zoomTransform(this),\r\n        scale = transform.k,\r\n        tx = transform.x,\r\n        ty = transform.y\r\n    data.scale = scale\r\n    data.tx = tx\r\n    data.ty = ty\r\n    d3.select(this).attr(\"transform\", transform)\r\n    //d3.select(this).attr(\"transform\", d3.event.transform)\r\n    //console.log(this)\r\n    //console.log(d3.event)\r\n  //circles.attr(\"transform\", d3.event.transform);\r\n}\r\nzoom_handler(nodes)\r\n\r\n\r\n\r\nsetTimeout(() => {      \r\n    datas.push( {\r\n        id : 11,\r\n        username : '魏道明',\r\n        strong: 5,\r\n        x : cx,\r\n        y : cy\r\n    })   \r\n    link_data.push({\r\n        source: 1,\r\n        target: 11\r\n    })\r\n    svg.select('g.nodes')\r\n       .selectAll('circle')\r\n       .data(datas)\r\n       .enter()\r\n       .append(\"circle\")\r\n       .attr(\"r\", data => data.strong * 2)\r\n       .attr(\"fill\", \"red\")\r\n    svg.select('g.links')\r\n       .selectAll('line')\r\n       .data(link_data)\r\n       .enter()\r\n       .append('line')\r\n       .attr('stroke-width', 2)\r\n       .attr('stroke', 'green')\r\n    \r\n    nodes = svg.select('g.nodes').selectAll('circle')\r\n    links = svg.select('g.links').selectAll('line')\r\n    //  添加节点\r\n    \r\n    sim.nodes(datas)\r\n    //linkForce.force(0.5)\r\n    //linkForce.initialize(datas)\r\n    linkForce.links(link_data)\r\n    //sim.force('links', linkForce)\r\n    sim.alpha(0.3).restart()\r\n    //sim.restart()\r\n}, 5000)\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/graph.es6"],"sourceRoot":""}